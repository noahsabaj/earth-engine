<!DOCTYPE html>
<html>
<head>
    <title>Check What's Being Served</title>
</head>
<body>
    <h1>Checking what index.html contains...</h1>
    <pre id="content"></pre>
    
    <script>
        // Fetch index.html and display its content
        fetch('./index.html?nocache=' + Date.now())
            .then(r => r.text())
            .then(text => {
                const pre = document.getElementById('content');
                
                // Show just the script section
                const scriptStart = text.indexOf('<script type="module">');
                const scriptEnd = text.indexOf('</script>', scriptStart);
                
                if (scriptStart > -1 && scriptEnd > -1) {
                    const scriptContent = text.substring(scriptStart, scriptEnd + 9);
                    pre.textContent = scriptContent;
                    
                    // Highlight what we're looking for
                    if (scriptContent.includes('initializeEngine')) {
                        pre.innerHTML += '\n\n<span style="color: green;">✓ CORRECT: Uses initializeEngine</span>';
                    } else if (scriptContent.includes('EarthEngine')) {
                        pre.innerHTML += '\n\n<span style="color: red;">✗ OLD VERSION: Still imports EarthEngine class</span>';
                    }
                } else {
                    pre.textContent = 'Could not find script section';
                }
            })
            .catch(err => {
                document.getElementById('content').textContent = 'Error: ' + err.message;
            });
    </script>
</body>
</html>